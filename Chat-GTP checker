import openai_secret_manager
import openai

# Get the API key for the OpenAI service
secrets = openai_secret_manager.get_secrets("openai")
openai.api_key = secrets["api_key"]

def check_ai_generated(text):
    # Use the OpenAI GPT-3 model to generate a continuation of the text
    response = openai.Completion.create(
        engine="text-davinci-002",
        prompt=(f"{text}"),
        temperature=0,
        max_tokens=2048,
        top_p=1,
        frequency_penalty=0,
        presence_penalty=0
    )

    # Get the generated text
    generated_text = response.get("choices")[0].get("text")

    # Check if the generated text is similar to the original text
    if text in generated_text:
        return True
    else:
        return False

# Example usage
text = "This is an example of text that might be generated by an AI"
if check_ai_generated(text):
    print("The text is generated by an AI.")
else:
    print("The text is not generated by an AI.")
